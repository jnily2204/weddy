<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Weddy - K·∫ø ho·∫°ch c∆∞·ªõi th√¥ng minh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Raleway:wght@300;400;500;600;700;800;900&display=swap');
        body { font-family: 'Raleway', sans-serif; -webkit-tap-highlight-color: transparent; }
        .font-title { font-family: 'Cormorant Garamond', serif; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-[#F0EBE5] text-stone-700 overflow-x-hidden text-base">
    <div id="root"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, signOut, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, updateDoc, onSnapshot, getDoc, collection } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD_F3OI5GexlAqgC8TZ1CN1JB5O3RacQqs",
            authDomain: "weddyvn.firebaseapp.com",
            projectId: "weddyvn",
            storageBucket: "weddyvn.firebasestorage.app",
            messagingSenderId: "504927899297",
            appId: "1:504927899297:web:1a3d3a1b6cfafe0716aae0",
            measurementId: "G-KK4B3RXVNV"
        };

        try {
            const app = initializeApp(firebaseConfig);
            window.firebaseServices = { 
                auth: getAuth(app), 
                db: getFirestore(app), 
                signInWithEmailAndPassword, onAuthStateChanged, doc, setDoc, updateDoc, onSnapshot, getDoc, collection, GoogleAuthProvider, signInWithPopup, signOut, createUserWithEmailAndPassword 
            };
        } catch (e) { console.error("Firebase Error:", e); }
    </script>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const APP_ID = 'weddy-stable-final';

        // ---------------------------------------------------------
        // 1. UTILS & ICONS (Ph·∫£i n·∫±m ƒë·∫ßu ti√™n)
        // ---------------------------------------------------------
        const utils = {
            formatMoney: (a) => (a || 0).toLocaleString('vi-VN') + " ƒë",
            formatInput: (v) => v ? v.toString().replace(/\D/g, '').replace(/\B(?=(\d{3})+(?!\d))/g, ".") : "",
            parseInput: (v) => v ? parseInt(v.toString().replace(/\./g, '')) || 0 : 0,
            getDaysLeft: (d) => {
                if (!d) return "---";
                const diff = Math.ceil((new Date(d).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24));
                return diff > 0 ? `${diff} NG√ÄY N·ªÆA` : "ƒê√É QUA";
            }
        };

        const Icon = ({ children, size = 24, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>{children}</svg>
        );

        const Icons = {
            Heart: (p) => <Icon {...p}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" /></Icon>,
            Check: (p) => <Icon {...p}><polyline points="20 6 9 17 4 12" /></Icon>,
            Users: (p) => <Icon {...p}><g><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></g></Icon>,
            Plus: (p) => <Icon {...p}><path d="M5 12h14" /><path d="M12 5v14" /></Icon>,
            Layout: (p) => <Icon {...p}><rect width="18" height="18" x="3" y="3" rx="2" ry="2" /><path d="M3 9h18" /><path d="M9 21V9" /></Icon>,
            DollarSign: (p) => <Icon {...p}><line x1="12" x2="12" y1="2" y2="22" /><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" /></Icon>,
            X: (p) => <Icon {...p}><path d="M18 6 6 18" /><path d="m6 6 12 12" /></Icon>,
            ChevronRight: (p) => <Icon {...p}><path d="m9 18 6-6-6-6" /></Icon>,
            Link: (p) => <Icon {...p}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" /><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" /></Icon>,
            Share: (p) => <Icon {...p}><circle cx="18" cy="5" r="3" /><circle cx="6" cy="12" r="3" /><circle cx="18" cy="19" r="3" /><line x1="8.59" x2="15.42" y1="13.51" y2="17.49" /><line x1="15.41" x2="8.59" y1="6.51" y2="10.49" /></Icon>,
            Trash: (p) => <Icon {...p}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></Icon>,
            Bell: (p) => <Icon {...p}><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" /></Icon>,
            Edit: (p) => <Icon {...p}><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" /><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" /></Icon>,
            ArrowUpRight: (p) => <Icon {...p}><path d="M7 7h10v10" /><path d="M7 17 17 7" /></Icon>,
            Star: (p) => <Icon {...p}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /></Icon>,
            Home: (p) => <Icon {...p}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></Icon>,
            LogOut: (p) => <Icon {...p}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" /><polyline points="16 17 21 12 16 7" /><line x1="21" x2="9" y1="12" y2="12" /></Icon>,
            Undo: (p) => <Icon {...p}><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></Icon>,
            User: (p) => <Icon {...p}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></Icon>
        };

        // ---------------------------------------------------------
        // 2. HOOKS & UI BASE
        // ---------------------------------------------------------
        const useFirebase = () => {
            const [services, setServices] = useState(null);
            useEffect(() => {
                const interval = setInterval(() => { if (window.firebaseServices) { setServices(window.firebaseServices); clearInterval(interval); } }, 100);
                return () => clearInterval(interval);
            }, []);
            return services;
        };

        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 animate-in">
                    <div className="absolute inset-0 bg-black/20" onClick={onClose}></div>
                    <div className="relative bg-white rounded-[2rem] p-6 w-full max-w-md shadow-2xl flex flex-col max-h-[90vh] overflow-y-auto">
                        <div className="flex justify-between items-center mb-6">
                            <h3 className="text-xl font-title font-bold uppercase text-stone-600">{title}</h3>
                            <button onClick={onClose}><Icons.X size={24} /></button>
                        </div>
                        {children}
                    </div>
                </div>
            );
        };

        const Logo = ({ className }) => (
            <div className={`flex items-center gap-1.5 cursor-pointer ${className}`}>
                <span className="text-xl font-black text-stone-700">WEDDY</span>
                <span className="text-rose-500">‚ô•</span>
            </div>
        );

        // ---------------------------------------------------------
        // 3. AI & DATA ENGINE
        // ---------------------------------------------------------
        const MOCK_VENDORS = [
            { id: 1, name: "TuArt Wedding", category: "photography", location: "Hanoi", price: 15000000, tags: ['modern', 'luxury', 'korean'], image: "https://images.unsplash.com/photo-1537633552985-df8429e8048b?w=500" },
            { id: 2, name: "Gem Center", category: "venue", location: "HCM", price: 200000000, tags: ['luxury', 'modern'], image: "https://images.unsplash.com/photo-1519167758481-83f550bb49b3?w=500" },
            { id: 3, name: "M·ªôc Studio", category: "photography", location: "HCM", price: 8000000, tags: ['rustic', 'vintage', 'minimalist'], image: "https://images.unsplash.com/photo-1520854221256-17451cc330e7?w=500" },
            { id: 4, name: "Tr·ªëng ƒê·ªìng Palace", category: "venue", location: "Hanoi", price: 80000000, tags: ['traditional', 'modern'], image: "https://images.unsplash.com/photo-1519741497674-611481863552?w=500" },
            { id: 5, name: "Chill Decor", category: "decoration", location: "Danang", price: 12000000, tags: ['rustic', 'minimalist'], image: "https://images.unsplash.com/photo-1478146059778-26028b07395a?w=500" },
        ];

        const getRecommendations = (userProfile, vendors) => {
            if (!userProfile) return vendors;
            const userLoc = (userProfile.location || "").toLowerCase();
            const userBudget = parseInt(userProfile.budgetLimit || 300000000);
            const userVibes = Array.isArray(userProfile.vibes) ? userProfile.vibes : [];

            return vendors.map(v => {
                let score = 0; let reasons = [];
                if (userLoc && v.location.toLowerCase().includes(userLoc)) { score += 30; reasons.push("üìç C√πng khu v·ª±c"); }
                if (v.price <= userBudget * 0.2) { score += 40; reasons.push("üí∞ Gi√° t·ªët"); }
                const matchVibes = v.tags.filter(t => userVibes.includes(t));
                if (matchVibes.length > 0) { score += matchVibes.length * 20; reasons.push(`‚ú® Gu ${matchVibes.join(', ')}`); }
                return { ...v, score, reasons };
            }).filter(v => v.score > 0).sort((a, b) => b.score - a.score);
        };

        // ---------------------------------------------------------
        // 4. SUB-COMPONENTS (Ph·∫£i ƒë·ªãnh nghƒ©a tr∆∞·ªõc FullPlannerApp)
        // ---------------------------------------------------------
        
        // Vendor Marketplace Component
        const VendorMarketplace = ({ userProfile, weddingData }) => {
            const recommendations = useMemo(() => {
                try {
                    return getRecommendations({ ...userProfile, budgetLimit: weddingData?.budgetLimit }, MOCK_VENDORS);
                } catch (e) { return MOCK_VENDORS; }
            }, [userProfile, weddingData]);

            return (
                <div className="pt-24 pb-32 px-4 max-w-6xl mx-auto animate-in">
                    <div className="text-center mb-8">
                        <h2 className="text-3xl font-title font-bold mb-2">ƒê·ªëi t√°c ho√†n h·∫£o</h2>
                        <p className="text-stone-500 text-sm">G·ª£i √Ω d·ª±a tr√™n gu c·ªßa b·∫°n</p>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        {recommendations.map(item => (
                            <div key={item.id} className="bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-lg transition-all">
                                <div className="h-48 bg-gray-200 relative">
                                    <img src={item.image} className="w-full h-full object-cover" />
                                    <div className="absolute bottom-2 right-2 bg-white/90 px-2 py-1 rounded text-xs font-bold">{utils.formatMoney(item.price)}</div>
                                </div>
                                <div className="p-4">
                                    <h3 className="font-bold text-lg">{item.name}</h3>
                                    <p className="text-xs text-stone-400 uppercase mb-2">{item.category}</p>
                                    <div className="flex flex-wrap gap-1 mb-4">
                                        {item.reasons.map((r, i) => <span key={i} className="text-[10px] bg-stone-100 px-2 py-1 rounded">{r}</span>)}
                                    </div>
                                    <button className="w-full py-2 bg-stone-800 text-white rounded-xl text-xs font-bold uppercase">Li√™n h·ªá</button>
                                </div>
                            </div>
                        ))}
                    </div>
                    {recommendations.length === 0 && <div className="text-center py-20 text-stone-400">Ch∆∞a c√≥ ƒë·ªëi t√°c ph√π h·ª£p.</div>}
                </div>
            );
        };

        const GettingStartedWizard = ({ onComplete, onSkip }) => {
            const [step, setStep] = useState(0);
            const [data, setData] = useState({ role: "", partnerName: "", engagementDate: "", weddingDate: "", location: "", budget: "", vibes: [] });
            const [isSubmitting, setIsSubmitting] = useState(false);
            const handleNext = () => setStep(prev => prev + 1);
            
            const vibes = [
                { id: 'traditional', label: 'Truy·ªÅn th·ªëng', icon: 'üèÆ' }, { id: 'modern', label: 'Hi·ªán ƒë·∫°i', icon: '‚ú®' },
                { id: 'luxury', label: 'Sang tr·ªçng', icon: 'üíé' }, { id: 'rustic', label: 'M·ªôc m·∫°c', icon: 'üåø' }
            ];
            const toggleVibe = (id) => setData(p => ({...p, vibes: p.vibes.includes(id) ? p.vibes.filter(x=>x!==id) : [...p.vibes, id]}));

            const steps = [
                { title: "B·∫°n l√† ai?", content: <div className="grid grid-cols-2 gap-4 mt-4">{['C√¥ d√¢u', 'Ch√∫ r·ªÉ'].map(r => <button key={r} onClick={() => setData({...data, role: r})} className={`p-4 border rounded-xl ${data.role===r ? 'bg-stone-800 text-white' : ''}`}>{r}</button>)}</div> },
                { title: "Gu c·ªßa b·∫°n?", content: <div className="grid grid-cols-2 gap-4 mt-4">{vibes.map(v => <button key={v.id} onClick={() => toggleVibe(v.id)} className={`p-4 border rounded-xl flex flex-col items-center ${data.vibes.includes(v.id) ? 'bg-stone-100 border-stone-400' : ''}`}><span className="text-2xl">{v.icon}</span><span className="text-xs font-bold uppercase mt-1">{v.label}</span></button>)}</div> },
                { title: "Ng√¢n s√°ch?", content: <div className="mt-4"><input type="text" value={data.budget} onChange={e => setData({...data, budget: utils.formatInput(e.target.value)})} placeholder="300.000.000" className="w-full p-4 border rounded-xl text-center text-2xl font-bold" /></div> },
                { title: "ƒê·ªãa ƒëi·ªÉm?", content: <div className="mt-4"><input type="text" value={data.location} onChange={e => setData({...data, location: e.target.value})} placeholder="TP. H·ªì Ch√≠ Minh" className="w-full p-4 border rounded-xl text-center" /></div> }
            ];

            const handleFinish = async () => {
                if(isSubmitting) return; setIsSubmitting(true);
                try { await onComplete({...data, budget: utils.parseInput(data.budget)}); } catch(e) { setIsSubmitting(false); }
            };

            return (
                <div className="fixed inset-0 z-50 bg-[#F0EBE5] flex items-center justify-center p-6">
                    <div className="w-full max-w-md text-center">
                        <h2 className="text-3xl font-title font-bold mb-2">{steps[step].title}</h2>
                        {steps[step].content}
                        <div className="mt-8 flex gap-3">
                            {step < steps.length - 1 ? 
                                <button onClick={handleNext} disabled={step===0 && !data.role} className="flex-1 py-4 bg-stone-800 text-white rounded-full font-bold uppercase text-xs disabled:opacity-50">Ti·∫øp t·ª•c</button> :
                                <button onClick={handleFinish} disabled={isSubmitting} className="flex-1 py-4 bg-emerald-600 text-white rounded-full font-bold uppercase text-xs">Ho√†n t·∫•t</button>
                            }
                            <button onClick={onSkip} className="px-6 py-4 text-xs font-bold uppercase text-stone-400">B·ªè qua</button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 5. LOGIC WRAPPER (FullPlannerApp) ---
        // (Ph·∫£i ƒë·ªãnh nghƒ©a SAU c√°c component con nh∆∞ng TR∆Ø·ªöC App)
        const FullPlannerApp = ({ currentUser, firebase, initialTab }) => {
            const [subTab, setSubTab] = useState(initialTab || 'overview');
            const [userProfile, setUserProfile] = useState(null);
            const [weddingData, setWeddingData] = useState(null);
            
            useEffect(() => { if(initialTab) setSubTab(initialTab); }, [initialTab]);

            // Fetch Profile & Data Logic (R√∫t g·ªçn cho ng·∫Øn)
            useEffect(() => {
                if(!firebase || !currentUser) return;
                const { db, doc, onSnapshot, setDoc, updateDoc } = firebase;
                const pref = doc(db, 'artifacts', APP_ID, 'users', currentUser.uid, 'profile', 'main');
                const unsub = onSnapshot(pref, async (s) => {
                    if(!s.exists()) await setDoc(pref, { email: currentUser.email, isSetupComplete: false });
                    else {
                        setUserProfile(s.data());
                        if(!s.data().weddingId) await updateDoc(pref, { weddingId: currentUser.uid });
                    }
                });
                return () => unsub();
            }, [firebase, currentUser]);

            useEffect(() => {
                if(!userProfile?.weddingId) return;
                const { db, doc, onSnapshot, setDoc, getDoc } = firebase;
                const wref = doc(db, 'artifacts', APP_ID, 'public', 'data', 'weddings', userProfile.weddingId);
                getDoc(wref).then(s => { if(!s.exists()) setDoc(wref, { tasks: [], budgetLimit: 300000000 }); });
                const unsub = onSnapshot(wref, s => { if(s.exists()) setWeddingData({...s.data(), weddingId: userProfile.weddingId}); });
                return () => unsub();
            }, [firebase, userProfile]);

            const userData = useMemo(() => (userProfile && weddingData) ? {...weddingData, profile: userProfile} : null, [userProfile, weddingData]);

            if (!userData) return <div className="h-screen flex items-center justify-center">Loading...</div>;

            if (!userData.profile?.isSetupComplete) {
                return <GettingStartedWizard 
                    onComplete={async (w) => {
                        await firebase.updateDoc(firebase.doc(firebase.db, 'artifacts', APP_ID, 'users', currentUser.uid, 'profile', 'main'), { ...w, isSetupComplete: true });
                        await firebase.updateDoc(firebase.doc(firebase.db, 'artifacts', APP_ID, 'public', 'data', 'weddings', userData.weddingId), { budgetLimit: w.budget });
                    }} 
                    onSkip={async () => await firebase.updateDoc(firebase.doc(firebase.db, 'artifacts', APP_ID, 'users', currentUser.uid, 'profile', 'main'), { isSetupComplete: true })}
                />;
            }

            return (
                <div className="pb-24">
                    {/* Header */}
                    <div className="pt-24 px-6 mb-8">
                        <p className="text-xs font-bold uppercase tracking-widest text-stone-400">Planner c·ªßa</p>
                        <h2 className="text-3xl font-title font-bold">{userData.profile.name || 'B·∫°n'}</h2>
                    </div>

                    {/* Navigation Tabs */}
                    <div className="flex justify-center mb-8 px-4">
                        <div className="bg-white/50 p-1 rounded-full flex gap-1">
                            {[{id:'overview', l:'T·ªïng quan'}, {id:'vendors', l:'D·ªãch v·ª•'}].map(t => (
                                <button key={t.id} onClick={() => setSubTab(t.id)} className={`px-6 py-2 rounded-full text-xs font-bold uppercase transition-all ${subTab===t.id ? 'bg-stone-800 text-white' : 'text-stone-500'}`}>{t.l}</button>
                            ))}
                        </div>
                    </div>

                    {/* Content */}
                    {subTab === 'overview' && (
                        <div className="px-4 max-w-4xl mx-auto space-y-6 animate-in">
                            <div className="bg-stone-800 text-white p-8 rounded-[2.5rem] relative overflow-hidden">
                                <p className="text-xs font-bold uppercase opacity-50 mb-2">ƒê√£ chi ti√™u</p>
                                <p className="text-5xl font-title font-bold">0 ƒë</p>
                                <p className="mt-4 text-xs font-bold uppercase opacity-50">Ng√¢n s√°ch: {utils.formatMoney(userData.budgetLimit)}</p>
                            </div>
                        </div>
                    )}

                    {subTab === 'vendors' && <VendorMarketplace userProfile={userData.profile} weddingData={userData} />}
                </div>
            );
        };

        // ---------------------------------------------------------
        // 6. MAIN APP (Defined LAST - N∆°i g·ªçi m·ªçi th·ª©)
        // ---------------------------------------------------------
        const App = () => {
            const [activeTab, setActiveTab] = useState('home');
            const [user, setUser] = useState(null);
            const [showLogin, setShowLogin] = useState(false);
            const firebase = useFirebase();

            useEffect(() => {
                if(firebase) firebase.onAuthStateChanged(firebase.auth, u => { setUser(u); if(u) setShowLogin(false); });
            }, [firebase]);

            const navigateTo = (t) => {
                if (t !== 'home' && !user) { setShowLogin(true); return; }
                setActiveTab(t);
                window.scrollTo({top:0, behavior:'smooth'});
            }

            const handleLogin = async () => {
                try {
                    const res = await firebase.signInWithPopup(firebase.auth, new firebase.GoogleAuthProvider());
                    navigateTo('planner');
                } catch(e) { alert("L·ªói ƒëƒÉng nh·∫≠p"); }
            }

            return (
                <div className="min-h-screen relative">
                    {/* Top Nav */}
                    <div className="fixed top-4 left-0 w-full z-40 flex justify-center px-4">
                        <nav className="bg-white/80 backdrop-blur-md border border-white/40 shadow-lg px-6 py-3 rounded-full flex items-center gap-6">
                            <div onClick={() => navigateTo('home')}><Logo /></div>
                            {['home', 'planner', 'vendors'].map(t => (
                                <button key={t} onClick={() => navigateTo(t)} className={`text-xs font-bold uppercase ${activeTab===t ? 'text-stone-900' : 'text-stone-400'}`}>{t === 'vendors' ? 'D·ªãch v·ª•' : (t==='home' ? 'Trang ch·ªß' : 'Planner')}</button>
                            ))}
                            {user ? <button onClick={() => firebase.signOut(firebase.auth)}><Icons.LogOut size={16}/></button> : <button onClick={() => setShowLogin(true)} className="bg-stone-800 text-white px-4 py-2 rounded-full text-xs font-bold uppercase">Login</button>}
                        </nav>
                    </div>

                    {/* Views */}
                    {activeTab === 'home' && (
                        <div className="pt-40 text-center px-4 animate-in">
                            <div className="inline-block px-4 py-1 bg-rose-100 text-rose-600 rounded-full text-[10px] font-bold uppercase mb-4">Weddy Planner</div>
                            <h1 className="text-6xl font-title font-bold text-stone-800 mb-6">ƒê√°m c∆∞·ªõi trong m∆°</h1>
                            <button onClick={() => navigateTo('planner')} className="px-8 py-4 bg-stone-800 text-white rounded-full font-bold uppercase text-xs shadow-xl hover:scale-105 transition-transform">B·∫Øt ƒë·∫ßu ngay</button>
                        </div>
                    )}

                    {activeTab === 'planner' && user && <FullPlannerApp currentUser={user} firebase={firebase} initialTab='overview' />}
                    
                    {/* Logic quan tr·ªçng: Tab D·ªãch v·ª• g·ªçi FullPlannerApp ƒë·ªÉ c√≥ data ch·∫°y AI */}
                    {activeTab === 'vendors' && user && <FullPlannerApp currentUser={user} firebase={firebase} initialTab='vendors' />}

                    {/* Login Modal */}
                    <Modal isOpen={showLogin} onClose={() => setShowLogin(false)} title="ƒêƒÉng nh·∫≠p">
                        <div className="py-8 text-center">
                            <p className="mb-6 text-stone-500">ƒêƒÉng nh·∫≠p ƒë·ªÉ l∆∞u k·∫ø ho·∫°ch c·ªßa b·∫°n</p>
                            <button onClick={handleLogin} className="w-full py-4 border rounded-xl flex items-center justify-center gap-2 font-bold hover:bg-stone-50 transition-colors">
                                Ti·∫øp t·ª•c v·ªõi Google
                            </button>
                        </div>
                    </Modal>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
