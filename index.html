import React, { useState } from 'react';

// Component Wizard "sáº¡ch", khÃ´ng cáº§n cÃ i thÃªm thÆ° viá»‡n
const GettingStartedWizard = ({ onComplete }) => {
  const [step, setStep] = useState(1);
  const [formData, setFormData] = useState({
    myRole: '',     // 'groom' hoáº·c 'bride'
    myName: '',
    partnerName: '', // TÃªn ngÆ°á»i áº¥y
    weddingDate: '', // NgÃ y cÆ°á»›i
    location: '',    // Tá»‰nh/ThÃ nh phá»‘
    budget: ''       // NgÃ¢n sÃ¡ch
  });

  const totalSteps = 4; // ChÃºng ta gom gá»n láº¡i thÃ nh 4 bÆ°á»›c chÃ­nh

  // HÃ m xá»­ lÃ½ nháº­p liá»‡u
  const handleChange = (e) => {
    const { name, value } = e.target;
    // Xá»­ lÃ½ riÃªng cho Ã´ nháº­p tiá»n (chá»‰ nháº­n sá»‘)
    if (name === 'budget') {
      const numberValue = value.replace(/\D/g, ''); 
      setFormData({ ...formData, [name]: numberValue });
    } else {
      setFormData({ ...formData, [name]: value });
    }
  };

  // HÃ m chuyá»ƒn bÆ°á»›c
  const handleNext = () => {
    if (step < totalSteps) {
      setStep(step + 1);
    } else {
      // Khi báº¥m HoÃ n táº¥t, kiá»ƒm tra xem onComplete cÃ³ tá»“n táº¡i khÃ´ng Ä‘á»ƒ trÃ¡nh lá»—i
      if (onComplete) {
        onComplete(formData);
      } else {
        console.log("Form Completed:", formData);
        alert("ÄÃ£ hoÃ n táº¥t! Dá»¯ liá»‡u Ä‘ang Ä‘Æ°á»£c log trong Console.");
      }
    }
  };

  const handleBack = () => {
    if (step > 1) setStep(step - 1);
  };

  // HÃ m format tiá»n tá»‡ (1000000 => 1.000.000)
  const formatCurrency = (val) => {
    if (!val) return '';
    return new Intl.NumberFormat('vi-VN').format(val);
  };

  return (
    <div className="min-h-screen bg-pink-50 flex items-center justify-center p-4 font-sans">
      <div className="bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden">
        
        {/* Thanh tiáº¿n trÃ¬nh (Progress Bar) */}
        <div className="h-1.5 bg-gray-100 w-full">
          <div 
            className="h-full bg-pink-500 transition-all duration-300"
            style={{ width: `${(step / totalSteps) * 100}%` }}
          />
        </div>

        <div className="p-6 md:p-8">
          
          {/* --- BÆ¯á»šC 1: Äá»ŠNH DANH --- */}
          {step === 1 && (
            <div className="text-center">
              <div className="text-4xl mb-4">ğŸ‘¤</div>
              <h2 className="text-2xl font-bold text-gray-800 mb-2">Báº¡n lÃ  ai?</h2>
              <p className="text-gray-500 mb-6">Äá»ƒ Weddy xÆ°ng hÃ´ cho Ä‘Ãºng nhÃ©.</p>

              <div className="grid grid-cols-2 gap-4 mb-6">
                <button
                  onClick={() => setFormData({...formData, myRole: 'groom'})}
                  className={`p-4 rounded-xl border-2 transition-all ${
                    formData.myRole === 'groom' 
                    ? 'border-blue-500 bg-blue-50 text-blue-700' 
                    : 'border-gray-200 hover:border-blue-200'
                  }`}
                >
                  <div className="text-3xl mb-1">ğŸ¤µ</div>
                  <div className="font-semibold">ChÃº Rá»ƒ</div>
                </button>

                <button
                  onClick={() => setFormData({...formData, myRole: 'bride'})}
                  className={`p-4 rounded-xl border-2 transition-all ${
                    formData.myRole === 'bride' 
                    ? 'border-pink-500 bg-pink-50 text-pink-700' 
                    : 'border-gray-200 hover:border-pink-200'
                  }`}
                >
                  <div className="text-3xl mb-1">ğŸ‘°</div>
                  <div className="font-semibold">CÃ´ DÃ¢u</div>
                </button>
              </div>

              <div className="space-y-3 text-left">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">TÃªn cá»§a báº¡n</label>
                  <input
                    type="text"
                    name="myName"
                    value={formData.myName}
                    onChange={handleChange}
                    placeholder="VÃ­ dá»¥: HoÃ ng Nam"
                    className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-pink-500 outline-none"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">TÃªn ngÆ°á»i áº¥y â¤ï¸</label>
                  <input
                    type="text"
                    name="partnerName"
                    value={formData.partnerName}
                    onChange={handleChange}
                    placeholder="VÃ­ dá»¥: Thu HÃ "
                    className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-pink-500 outline-none"
                  />
                </div>
              </div>
            </div>
          )}

          {/* --- BÆ¯á»šC 2: THá»œI GIAN & Äá»ŠA ÄIá»‚M --- */}
          {step === 2 && (
            <div className="text-center">
              <div className="text-4xl mb-4">ğŸ“…</div>
              <h2 className="text-2xl font-bold text-gray-800 mb-2">NgÃ y trá»ng Ä‘áº¡i</h2>
              <p className="text-gray-500 mb-6">Khi nÃ o sá»± kiá»‡n diá»…n ra?</p>

              <div className="space-y-4 text-left">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">NgÃ y cÆ°á»›i (Dá»± kiáº¿n)</label>
                  <input
                    type="date"
                    name="weddingDate"
                    value={formData.weddingDate}
                    onChange={handleChange}
                    className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-pink-500 outline-none text-lg"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Tá»• chá»©c táº¡i tá»‰nh/thÃ nh nÃ o?</label>
                  <select
                    name="location"
                    value={formData.location}
                    onChange={handleChange}
                    className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-pink-500 outline-none bg-white"
                  >
                    <option value="">-- Chá»n Ä‘á»‹a Ä‘iá»ƒm --</option>
                    <option value="H
